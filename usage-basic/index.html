



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="An extensive workflow to process Illumina sequencing for bacterial genomes.">
      
      
        <link rel="canonical" href="https://bactopia.github.io/bactopia/usage-basic/">
      
      
        <meta name="author" content="Robert A. Petit III">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.1">
    
    
      
        <title>Basic Usage - Bactopia</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-104199698-2", "bactopia.github.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#basic-usage-for-bactopia" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://bactopia.github.io/bactopia" title="Bactopia" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Bactopia
            </span>
            <span class="md-header-nav__topic">
              
                Basic Usage
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/bactopia/bactopia/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://bactopia.github.io/bactopia" title="Bactopia" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Bactopia
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/bactopia/bactopia/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../datasets/" title="Build Datasets" class="md-nav__link">
      Build Datasets
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Basic Usage
      </label>
    
    <a href="./" title="Basic Usage" class="md-nav__link md-nav__link--active">
      Basic Usage
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fastq-inputs" title="FASTQ Inputs" class="md-nav__link">
    FASTQ Inputs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local" title="Local" class="md-nav__link">
    Local
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-sample" title="Single Sample" class="md-nav__link">
    Single Sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-samples" title="Multiple Samples" class="md-nav__link">
    Multiple Samples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-fofn-format" title="The FOFN Format" class="md-nav__link">
    The FOFN Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-a-fofn" title="Generating A FOFN" class="md-nav__link">
    Generating A FOFN
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-fofn" title="Validating FOFN" class="md-nav__link">
    Validating FOFN
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#without-errors" title="Without Errors" class="md-nav__link">
    Without Errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-errors" title="With errors" class="md-nav__link">
    With errors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ena-sra" title="ENA &amp; SRA" class="md-nav__link">
    ENA &amp; SRA
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generating-accession-list" title="Generating Accession List" class="md-nav__link">
    Generating Accession List
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_2" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-genome_size" title="--genome_size" class="md-nav__link">
    --genome_size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-keep_all_files" title="--keep_all_files" class="md-nav__link">
    --keep_all_files
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../workflow-overview/" title="Workflow Overview" class="md-nav__link">
      Workflow Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../output-overview/" title="Output Overview" class="md-nav__link">
      Output Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../usage-complete/" title="Complete Usage" class="md-nav__link">
      Complete Usage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../acknowledgements/" title="Acknowledgements" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fastq-inputs" title="FASTQ Inputs" class="md-nav__link">
    FASTQ Inputs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local" title="Local" class="md-nav__link">
    Local
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-sample" title="Single Sample" class="md-nav__link">
    Single Sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-samples" title="Multiple Samples" class="md-nav__link">
    Multiple Samples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-fofn-format" title="The FOFN Format" class="md-nav__link">
    The FOFN Format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-a-fofn" title="Generating A FOFN" class="md-nav__link">
    Generating A FOFN
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-fofn" title="Validating FOFN" class="md-nav__link">
    Validating FOFN
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#without-errors" title="Without Errors" class="md-nav__link">
    Without Errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-errors" title="With errors" class="md-nav__link">
    With errors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ena-sra" title="ENA &amp; SRA" class="md-nav__link">
    ENA &amp; SRA
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generating-accession-list" title="Generating Accession List" class="md-nav__link">
    Generating Accession List
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_2" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-genome_size" title="--genome_size" class="md-nav__link">
    --genome_size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-keep_all_files" title="--keep_all_files" class="md-nav__link">
    --keep_all_files
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bactopia/bactopia/edit/master/docs/usage-basic.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="basic-usage-for-bactopia">Basic Usage For Bactopia<a class="headerlink" href="#basic-usage-for-bactopia" title="Permanent link">&para;</a></h1>
<p>Bactopia is a wrapper around many different tools. Each of these tools may (or may not) have there own configurable parameters for you to tweak. In order to facilitate getting started with Bactopia, this section has been limited to discussion of only a few parameters. However, if you are interested in the full list of configurable parameters in Bactopia, please check out the <a href="../usage-complete/">Complete Usage</a> section.</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span>bactopia

Required Parameters:
    ### For Procesessing Multiple Samples
    --fastqs STR            An input file containing the sample name and
                                absolute paths to FASTQs to process

    ### For Processing A Single Sample
    --R1 STR                First set of reads for paired end in compressed (gzip)
                                FASTQ format

    --R2 STR                Second set of reads for paired end in compressed (gzip)
                                FASTQ format

    --SE STR                Single end set of reads in compressed (gzip) FASTQ format

    --sample STR            The name of the input sequences

    ### For Downloading from ENA
    --accessions            An input file containing ENA/SRA experiement accessions to
                                be processed

    --accession             A single ENA/SRA Experiment accession to be processed


Dataset Parameters:
    --datasets DIR          The path to available datasets that have
                                already been set up

    --species STR           Determines which species-specific dataset to
                                use for the input sequencing

Optional Parameters:
    --coverage INT          Reduce samples to a given coverage
                                Default: 100x

    --genome_size INT       Expected genome size (bp) for all samples, a value of &#39;0&#39;
                                will disable read error correction and read subsampling.
                                Special values (requires --species):
                                    &#39;min&#39;: uses minimum completed genome size of species
                                    &#39;median&#39;: uses median completed genome size of species
                                    &#39;mean&#39;: uses mean completed genome size of species
                                    &#39;max&#39;: uses max completed genome size of species
                                Default: Mash estimate

    --outdir DIR            Directory to write results to
                                Default: .

    --max_time INT          The maximum number of minutes a job should run before being halted.
                                Default: 120 minutes

    --max_memory INT        The maximum amount of memory (Gb) allowed to a single process.
                                Default: 32 Gb

    --cpus INT              Number of processors made available to a single
                                process.
                                Default: 4

Nextflow Related Parameters:
    --infodir DIR           Directory to write Nextflow summary files to
                                Default: ./bactopia-info

    --condadir DIR          Directory to Nextflow should use for Conda environments
                                Default: Bactopia&#39;s Nextflow directory

    --nfdir                 Print directory Nextflow has pulled Bactopia to

    --overwrite             Nextflow will overwrite existing output files.
                                Default: false

    --conatainerPath        Path to Singularity containers to be used by the &#39;slurm&#39;
                                profile.
                                Default: /opt/bactopia/singularity

    --sleep_time            After reading datases, the amount of time (seconds) Nextflow
                                will wait before execution.
                                Default: 5 seconds

Useful Parameters:
    --available_datasets    Print a list of available datasets found based
                                on location given by &quot;--datasets&quot;

    --example_fastqs        Print example of expected input for FASTQs file

    --check_fastqs          Verify &quot;--fastqs&quot; produces the expected inputs

    --compress              Compress (gzip) select outputs (e.g. annotation, variant calls)
                                to reduce overall storage footprint.

    --keep_all_files        Keeps all analysis files created. By default, intermediate
                                files are removed. This will not affect the ability
                                to resume Nextflow runs, and only occurs at the end
                                of the process.

    --dry_run               Mimics workflow execution, to help prevent errors realated to
                                conda envs being built in parallel. Only useful on new
                                installs of Bactopia.

    --version               Print workflow version information

    --help                  Show this message and exit

    --help_all              Show a complete list of adjustable parameters
</pre></div>

<h2 id="fastq-inputs">FASTQ Inputs<a class="headerlink" href="#fastq-inputs" title="Permanent link">&para;</a></h2>
<p>Bactopia has multiple approaches to specify your input sequences. You can make use of your local FASTQs or download FASTQs from the <a href="https://www.ebi.ac.uk/ena">European Nucleotide Archive (ENA)</a>. Which approach really depends on what you need to achieve! The following sections describe methods to process single samples, multiple samples, downloading samples from the ENA.</p>
<h3 id="local">Local<a class="headerlink" href="#local" title="Permanent link">&para;</a></h3>
<h4 id="single-sample">Single Sample<a class="headerlink" href="#single-sample" title="Permanent link">&para;</a></h4>
<p>When you only need to process a single sample at a time, Bactopia allows that! You only have to the sample name (<code>--sample</code>) and the whether the read set is paired-end (<code>--R1</code> and <code>--R2</code>) or a single-end (<code>--SE</code>). </p>
<div class="admonition info">
<p class="admonition-title">Use --R1, --R2 for Paired-End FASTQs</p>
<p><code>bactopia --sample my-sample --R1 /path/to/my-sample_R1.fastq.gz --R2 /path/to/my-sample_R2.fastq.gz</code></p>
</div>
<div class="admonition info">
<p class="admonition-title">Use --SE for Single-End FASTQs</p>
<p><code>bactopia --sample my-sample --SE /path/to/my-sample.fastq.gz</code></p>
</div>
<h4 id="multiple-samples">Multiple Samples<a class="headerlink" href="#multiple-samples" title="Permanent link">&para;</a></h4>
<p>For multiple samples, you must create a file with information about the inputs, a <em>file of filenames</em> (FOFN). This file specifies sample names and location of FASTQs to be processed. Using this information, paired-end or single-end information can be extracted as well as naming output files.</p>
<p>While this is an additional step for you, the user, it helps to avoid potential pattern matching errors. </p>
<p>Most importantly, by taking this approach, you can process hundreds of samples in a single command. There is also the added benefit of knowing which FASTQs were analysed and their location at a later time!</p>
<div class="admonition info">
<p class="admonition-title">Use --fastqs for Multiple Samples</p>
<p><code>bactopia --fastqs my-samples.txt</code></p>
</div>
<h5 id="the-fofn-format">The FOFN Format<a class="headerlink" href="#the-fofn-format" title="Permanent link">&para;</a></h5>
<p>You can use the <code>--example_fastqs</code> to get an example of the expected structure for the input FASTQs FOFN.</p>
<div class="highlight"><pre><span></span>bactopia --example_fastqs
N E X T F L O W  ~  version 19.01.0
Launching `/home/rpetit/illumina-cleanup/bin/illumina-cleanup` [naughty_borg] - revision: 0416ba407c
Printing example input for &quot;--fastqs&quot;

sample  r1      r2
test001 /path/to/fastqs/test_R1.fastq.gz        /path/to/fastqs/test_R2.fastq.gz
test002 /path/to/fastqs/test.fastq.gz
</pre></div>

<p>The expected structure is a <strong>tab-delimited</strong> table with three columns:</p>
<ol>
<li><code>sample</code>: A unique prefix, or unique name, to be used for naming output files</li>
<li><code>r1</code>: If paired-end, the first pair of reads, else the single-end reads</li>
<li><code>r2</code>: If paired-end, the second pair of reads</li>
</ol>
<p>These three columns are used as the header for the file. In other words, all input FOFNs require their first line to be:
<div class="highlight"><pre><span></span>sample  r1      r2
</pre></div></p>
<p>All lines after the header line, contain unique sample names and location(s) to associated FASTQ file(s). Absolute paths should be used to prevent any <em>file not found</em> errors due to the relative path changing.</p>
<p>In the example above, two samples would be processed by Bactopia. Sample <code>test001</code> has two FASTQs and would be processed as pair-end reads. While sample <code>test002</code> only has a single FASTQ and would be processed as single-end reads.</p>
<h5 id="generating-a-fofn">Generating A FOFN<a class="headerlink" href="#generating-a-fofn" title="Permanent link">&para;</a></h5>
<p><code>bactopia prepare</code> has been included to help aid (hopefully!) the process of creating a FOFN for your samples. This script will attempt to find FASTQ files in a given directory and output the expected FOFN format. It will also output any potential issues associated with the pattern matching.</p>
<div class="admonition error">
<p class="admonition-title">Verify accuracy of FOFN</p>
<p>This is currently an experimental function. There are likely bugs to be ironed out. Please be sure to give the resulting FOFN a quick look over.</p>
</div>
<h6 id="usage_1">Usage<a class="headerlink" href="#usage_1" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span>bactopia prepare [-h] [-e STR] [-s STR] [--pattern STR] [--version] STR

bactopia prepare - Read a directory and prepare a FOFN of FASTQs

positional arguments:
  STR                Directory where FASTQ files are stored

optional arguments:
  -h, --help         show this help message and exit
  -e STR, --ext STR  Extension of the FASTQs. Default: .fastq.gz
  -s STR, --sep STR  Split FASTQ name on the last occurrence of the separator.
                     Default: _
  --pattern STR      Glob pattern to match FASTQs. Default: *.fastq.gz
  --version          show program&#39;s version number and exit
</pre></div>

<h6 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h6>
<p>Here is an example using the default parameters. In the example, sample <em>SRR00000</em> has more than 2 FASTQs matched to it, which is recognized as an error.</p>
<div class="highlight"><pre><span></span>bactopia prepare  tests/dummy-fastqs/
sample  r1      r2
SRR00000        /home/rpetit/projects/bactopia/bactopia/tests/dummy-fastqs/SRR00000.fastq.gz /home/rpetit/projects/bactopia/bactopia/tests/dummy-fastqs/SRR00000_1.fastq.gz       /home/rpetit/projects/bactopia/bactopia/tests/dummy-fastqs/SRR00000_2.fastq.gz
ERROR: &quot;SRR00000&quot; has more than two different FASTQ files, please check.
</pre></div>

<p>After tweaking the <code>--pattern</code> parameter a little bit. The error is corrected and sample <em>SRR00000</em> is properly recognized as a paired-end read set.</p>
<div class="highlight"><pre><span></span>bactopia prepare  tests/dummy-fastqs/ --pattern *_[12].fastq.gz
sample  r1      r2
SRR00000        /home/rpetit/projects/bactopia/bactopia/tests/dummy-fastqs/SRR00000_1.fastq.gz       /home/rpetit/projects/bactopia/bactopia/tests/dummy-fastqs/SRR00000_2.fastq.gz
</pre></div>

<p>There are a number of ways to tweak the pattern. Just please be sure to give a quick look over of the resulting FOFN.</p>
<h5 id="validating-fofn">Validating FOFN<a class="headerlink" href="#validating-fofn" title="Permanent link">&para;</a></h5>
<p>When a FOFN is given, the first thing Bactopia does is verify all FASTQ files are found. If everything checks out, each sample will then be processed, otherwise a list of samples with errors will be output to STDERR. </p>
<p>If you would like to only validate your FOFN (and not run the full pipeline), you can use the <code>--check_fastqs</code> parameter.</p>
<h6 id="without-errors">Without Errors<a class="headerlink" href="#without-errors" title="Permanent link">&para;</a></h6>
<p><div class="highlight"><pre><span></span>bactopia --check_fastqs --fastqs example-data/good-fastqs.txt
N E X T F L O W  ~  version 19.01.0
Launching `/home/rpetit3/bactopia/bactopia` [astonishing_colden] - revision: 96c6a1a7ae
Printing what would have been processed. Each line consists of an array of
three elements: [SAMPLE_NAME, IS_SINGLE_END, [FASTQ_1, FASTQ_2]]

Found:
[test001, false, [/home/rpetit3/bactopia/tests/fastqs/test_R1.fastq.gz, /home/rpetit3/bactopia/tests/fastqs/test_R2.fastq.gz]]
[test002, true, [/home/rpetit3/bactopia/tests/fastqs/test.fastq.gz]]
</pre></div>
Each sample has passed validation and is put into a three element array:</p>
<ol>
<li>sample - the name for this sample</li>
<li>is_single_end - the reads are single-end (true) or paired-end (false)</li>
<li>fastq_array - the fastqs associated with the sample</li>
</ol>
<p>This array is then automatically queued up for proccessing by Nextflow.</p>
<h6 id="with-errors">With errors<a class="headerlink" href="#with-errors" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span>bactopia --check_fastqs --fastqs tests/data/bad-fastqs.txt
N E X T F L O W  ~  version 19.01.0
Launching `/home/rpetit3/bactopia/bactopia` [kickass_mestorf] - revision: 222a5ad8b1
LINE 4:ERROR: Please verify /home/rpetit3/bactopia/test/fastqs/test003_R1.fastq.gz exists, and try again
LINE 5:ERROR: Please verify /home/rpetit3/bactopia/test/fastqs/test003_R1.fastq.gz exists, and try again
LINE 5:ERROR: Please verify /home/rpetit3/bactopia/test/fastqs/test002_R2.fastq.gz exists, and try again
Sample name &quot;test002&quot; is not unique, please revise sample names
The header line (line 1) does not follow expected structure.
Verify sample names are unique and/or FASTQ paths are correct
See &quot;--example_fastqs&quot; for an example
Exiting
</pre></div>

<p>In the above example, there are mulitple errors. Lines 4 and 5 (<code>LINE 4:ERROR</code> or <code>LINE 5:ERROR</code>) suggest that based on the given paths the FASTQs do not exist. The sample name <code>test002</code> has been used multiple times, and must be corrected. There is also an issue with the header line that must be looked into.</p>
<h3 id="ena-sra">ENA &amp; SRA<a class="headerlink" href="#ena-sra" title="Permanent link">&para;</a></h3>
<p>There are a lot of publicly avilable sequences available from the <a href="https://www.ebi.ac.uk/ena">European Nucleotide Archive</a> (ENA) and the <a href="https://www.ncbi.nlm.nih.gov/sra">Sequence Read Archive</a> (SRA). There's a good chance you might want to include some of those sequences in your analysis! If that sounds like you, Bactopia has that built in for you! You can give a single <em>Experiment</em> accession (<code>--accession</code>) or a file where each line is a single <em>Experiment</em> accession (<code>--accessions</code>). Bactopia will then query ENA to determine <em>Run</em> accession(s) associated with the given Experiment accession and proceed download the corresponding FASTQ files from either the SRA (default) or ENA (<code>--use_ena</code>). After the download is completed, it will be processed through Bactopia.</p>
<div class="admonition info">
<p class="admonition-title">Use --accession for a Single Experiment Accession</p>
<p>SRA: <code>bactopia --accession SRX476958</code>
ENA: <code>bactopia --accession SRX476958 --use_ena</code></p>
</div>
<div class="admonition info">
<p class="admonition-title">Use --accessions for Multiple Experiment Accessions</p>
<p>SRA: <code>bactopia --accessions my-accessions.txt</code>
ENA: <code>bactopia --accessions my-accessions.txt --use_ena</code></p>
</div>
<h4 id="generating-accession-list">Generating Accession List<a class="headerlink" href="#generating-accession-list" title="Permanent link">&para;</a></h4>
<p><code>bactopia search</code> has been made to help assist in generating a list of Experiment accessions to be procesed by Bactopia (via <code>--accessions</code>). Users can provide a Taxon ID (e.g. 1280), a binary name (e.g. Staphylococcus aureus), or Study accessions (e.g. PRJNA480016). This value is then queried against ENA's <a href="https://www.ebi.ac.uk/ena/browse/search-rest">Data Warehouse API</a>), and a list of all Experiment accessions associated with the query is returned.</p>
<h5 id="usage_2">Usage<a class="headerlink" href="#usage_2" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span>usage: bactopia search [-h] [--exact_taxon] [--outdir OUTPUT_DIRECTORY]
                       [--prefix PREFIX] [--limit INT] [--version]
                       STR

bactopia search - Search ENA for associated WGS samples

positional arguments:
  STR                   Taxon ID or Study accession

optional arguments:
  -h, --help            show this help message and exit
  --exact_taxon         Exclude Taxon ID descendents.
  --outdir OUTPUT_DIRECTORY
                        Directory to write output. (Default: .)
  --prefix PREFIX       Prefix to use for output file names. (Default: ena)
  --limit INT           Maximum number of results to return. (Default:
                        1000000)
  --version             show program&#39;s version number and exit

example usage:
  bactopia search PRJNA480016 --limit 20
  bactopia search 1280 --exact_taxon --limit 20&#39;
  bactopia search &quot;staphylococcus aureus&quot; --limit 20
</pre></div>

<h5 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span>bactopia search PRJNA480016 --limit 5
</pre></div>

<p>When completed three files are produced:</p>
<ol>
<li><code>ena-accessions.txt</code> - Contains a list of Experiment accessions to be processed.
   <div class="highlight"><pre><span></span>SRX4563686
SRX4563689
SRX4563687
SRX4563690
SRX4563688
</pre></div></li>
</ol>
<div class="admonition info">
<p class="admonition-title">Input for Bactopia</p>
<p>This file can be used in conjunction with the <code>--accessions</code> parameter for Bactopia processing.</p>
</div>
<ol>
<li>
<p><code>ena-results.txt</code> - Contains the full results of the API query. This includes multiples fields (sample_accession, tax_id, sample_alias, center_name, etc...)</p>
</li>
<li>
<p><code>ena-summary.txt</code> - Contains a small summary of the completed request
    <div class="highlight"><pre><span></span>QUERY: (study_accession=PRJNA480016 OR secondary_study_accession=PRJNA480016)
LIMIT: 5
RESULTS: 5 (./ena-results.txt)
ILLUMINA ACCESSIONS: 5 (./ena-accessions.txt)
</pre></div></p>
</li>
</ol>
<h2 id="-genome_size"><code>--genome_size</code><a class="headerlink" href="#-genome_size" title="Permanent link">&para;</a></h2>
<p>Throughout the Bactopia workflow a genome size is used for various tasks. By default, a genome size is estimated using Mash. However, users can provide their own value for genome size, use values based on <a href="/datasets/#species-specific">Species Specific Datasets</a>, or completely disable it.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>empty</em></td>
<td>Mash is used to estimate the genome size</td>
</tr>
<tr>
<td>integer</td>
<td>Uses the genome size (e.g. <code>--genome_size 2800000</code>) provided by the user</td>
</tr>
<tr>
<td>0</td>
<td>Read error correct and read subsampling will be disabled.</td>
</tr>
<tr>
<td>min</td>
<td>Requires <code>--species</code>, the minimum completed genome size for a species is used</td>
</tr>
<tr>
<td>median</td>
<td>Requires <code>--species</code>, the median completed genome size for a species is used</td>
</tr>
<tr>
<td>mean</td>
<td>Requires <code>--species</code>, the mean completed genome size for a species is used</td>
</tr>
<tr>
<td>max</td>
<td>Requires <code>--species</code>, the maximum completed genome size for a species is used</td>
</tr>
</tbody>
</table>
<div class="admonition error">
<p class="admonition-title">Mash may not be the most accurate estimate</p>
<p>Mash is very convenient to quickly estimate a genome size, but it may not be the most accurate in all cases and will differ between samples. It is recommended that when possible a known genome size or one based off completed genomes should be used. </p>
</div>
<h2 id="-keep_all_files"><code>--keep_all_files</code><a class="headerlink" href="#-keep_all_files" title="Permanent link">&para;</a></h2>
<p>In some processes, Bactopia will delete large intermediate files (e.g. multiple uncompressed FASTQs) <strong>only</strong> after a process successfully completes. Since this a per-process function, it does not affect Nextflow's ability to resume (<code>-resume</code>)a workflow. You can deactivate this feature using <code>--keep_all_files</code>. Please, keep in mind the <em>work</em> directory is already large, this will make it 2-3 times larger.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../datasets/" title="Build Datasets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Build Datasets
              </span>
            </div>
          </a>
        
        
          <a href="../workflow-overview/" title="Workflow Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Workflow Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2019 Robert A. Petit III. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>